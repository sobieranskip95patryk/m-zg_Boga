<!DOCTYPE html> 
<html lang="pl"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>MTAQuestWebsideX - Mózg Boga</title> 
    <script src="https://cdn.tailwindcss.com"></script> 
    <style> 
        @import 
url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap'); 
        body { 
            font-family: 'Orbitron', sans-serif; 
            background-color: #0d0d1a; 
            color: #b3b3e6; 
            overflow: hidden; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            min-height: 100vh; 
        } 
        .container { 
            width: 95%; 
            max-width: 1200px; 
            display: flex; 
            flex-direction: column; 
            gap: 2rem; 
            padding: 1rem; 
        } 
        @media (min-width: 768px) { 
            .container { 
                flex-direction: row; 
                height: 90vh; 
            } 
        } 
        .panel { 
            background-color: #1a1a33; 
            border: 2px solid #5a5a8a; 
            border-radius: 1.5rem; 
            padding: 1.5rem; 
            box-shadow: 0 0 20px rgba(179, 179, 230, 0.2); 
        } 
        .left-panel, .right-panel { 
            flex: 1; 
            display: flex; 
            flex-direction: column; 
            gap: 1rem; 
        } 
        .right-panel { 
            flex: 2; 
        } 
        h1, h2 { 
            text-shadow: 0 0 5px #b3b3e6; 
        } 
        .logo { 
            animation: pulse 2s infinite ease-in-out; 
        } 
        @keyframes pulse { 
            0%, 100% { transform: scale(1); filter: brightness(1); } 
            50% { transform: scale(1.05); filter: brightness(1.2); } 
        } 
        .text-neon { 
            color: #b3b3e6; 
            text-shadow: 0 0 5px #b3b3e6, 0 0 10px #b3b3e6, 0 0 20px #b3b3e6; 
        } 
        .stream-container { 
            height: 300px; 
            overflow-y: scroll; 
            border: 1px solid #5a5a8a; 
            border-radius: 0.75rem; 
            padding: 1rem; 
            background-color: #0d0d1a; 
            font-family: monospace; 
            white-space: pre-wrap; 
            scrollbar-width: thin; 
            scrollbar-color: #5a5a8a #0d0d1a; 
        } 
        .stream-container::-webkit-scrollbar { 
            width: 8px; 
        } 
        .stream-container::-webkit-scrollbar-track { 
            background: #0d0d1a; 
        } 
        .stream-container::-webkit-scrollbar-thumb { 
            background-color: #5a5a8a; 
            border-radius: 4px; 
        } 
        .loader { 
            border: 4px solid #5a5a8a; 
            border-top: 4px solid #b3b3e6; 
            border-radius: 50%; 
            width: 24px; 
            height: 24px; 
            animation: spin 1s linear infinite; 
        } 
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        } 
    </style> 
</head> 
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4"> 
 
<div class="container mx-auto"> 
     
    <!-- Lewy Panel --> 
    <div class="left-panel panel"> 
        <div class="text-center mb-4"> 
            <h1 class="text-2xl md:text-4xl font-bold mb-2">Mózg Boga</h1> 
            <p class="text-lg">Ekosystem `pinkplayevo-app`</p> 
        </div> 
 
        <!-- Sekcja logo --> 
        <div class="flex flex-col items-center justify-center p-4"> 
            <svg class="logo w-32 h-32 md:w-48 md:h-48" viewBox="0 0 100 100" fill="none" 
xmlns="http://www.w3.org/2000/svg"> 
                <defs> 
                    <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="0%"> 
                        <stop offset="0%" style="stop-color:#b3b3e6;stop-opacity:1" /> 
                        <stop offset="100%" style="stop-color:#8a2be2;stop-opacity:1" /> 
                    </linearGradient> 
                    <linearGradient id="gradient2" x1="0%" y1="0%" x2="100%" y2="0%"> 
                        <stop offset="0%" style="stop-color:#00ffff;stop-opacity:1" /> 
                        <stop offset="100%" style="stop-color:#b3b3e6;stop-opacity:1" /> 
                    </linearGradient> 
                </defs> 
                <circle cx="50" cy="50" r="45" stroke="url(#gradient1)" stroke-width="3" /> 
                <path d="M50 5C74.8528 5 95 25.1472 95 50C95 74.8528 74.8528 95 50 
95C25.1472 95 5 74.8528 5 50" stroke="url(#gradient2)" stroke-width="3" 
stroke-linecap="round" /> 
                <text x="50" y="55" font-size="20" font-weight="bold" fill="url(#gradient1)" 
text-anchor="middle" alignment-baseline="middle">∞</text> 
            </svg> 
            <p id="status-message" class="mt-4 text-center text-sm md:text-base 
text-neon">Uruchamianie reaktora...</p> 
        </div> 
 
        <!-- Sekcja Reaktor Paliwowy (wybór silnika + strumień danych) --> 
        <h2 class="text-lg font-bold text-center mb-2">Reaktor Paliwowy</h2> 
        
        <!-- Wybór Silnika AI -->
        <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Wybierz Silnik AI:</label>
            <select id="engine-selector" class="w-full p-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500">
                <option value="gokai">GOK:AI (m-zg_Boga)</option>
                <option value="spiralmind">SpiralMind-Nexus</option>
                <option value="migi">Apex Infinity MIGI Core</option>
                <option value="simulation">Symulacja (Demo)</option>
            </select>
        </div>
        
        <div id="data-stream" class="stream-container text-sm"></div> 
    </div> 
 
    <!-- Prawy Panel --> 
    <div class="right-panel panel"> 
        <h2 class="text-xl md:text-2xl font-bold text-center mb-4">Reaktor Termiczny - 
Interfejs</h2> 
 
        <!-- Sekcja wprowadzania i wyjścia --> 
        <div class="flex-grow flex flex-col justify-between"> 
            <div class="mb-4"> 
                <textarea id="prompt-input" class="w-full h-32 p-4 bg-gray-800 border-2 
border-gray-600 rounded-xl resize-none focus:outline-none focus:border-purple-500 text-sm 
md:text-base text-neon" placeholder="Wpisz swoje zapytanie... (np. 'Jakie są najnowsze 
trendy w kosmicznych technologiach?')"></textarea> 
            </div> 
            
            <!-- Status Silnika -->
            <div id="engine-status" class="mb-2 p-2 bg-gray-800 rounded-lg border border-gray-600">
                <p class="text-sm"><span class="text-purple-400">Aktywny silnik:</span> <span id="current-engine">GOK:AI (m-zg_Boga)</span></p>
                <p class="text-sm"><span class="text-blue-400">Status:</span> <span id="engine-connection">Gotowy</span></p>
            </div>
            
            <div id="output-container" class="flex flex-col flex-grow"> 
                <p class="text-lg font-bold mb-2 text-neon">Odpowiedź jądrowego silnika:</p> 
                <div id="output-display" class="stream-container flex-grow text-sm md:text-base"> 
                    <p class="text-gray-400">Czekam na zapytanie...</p> 
                </div> 
            </div> 
        </div> 
         
        <!-- Sekcja przycisków --> 
        <div class="flex flex-col md:flex-row gap-4 mt-4"> 
            <button id="send-btn" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white 
font-bold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg 
hover:shadow-purple-500/50"> 
                <span class="flex items-center justify-center"> 
                    <span class="mr-2">Zasil reaktor</span> 
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" 
stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> 
                </span> 
            </button> 
            <button id="explore-btn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white 
font-bold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg 
hover:shadow-blue-500/50"> 
                <span class="flex items-center justify-center"> 
                    <span class="mr-2">Test Silników</span> 
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" 
stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg> 
                </span> 
            </button> 
        </div> 
    </div> 
</div> 
 
<script> 
    const dataStream = document.getElementById('data-stream'); 
    const statusMessage = document.getElementById('status-message'); 
    const promptInput = document.getElementById('prompt-input'); 
    const sendBtn = document.getElementById('send-btn'); 
    const outputDisplay = document.getElementById('output-display'); 
    const engineSelector = document.getElementById('engine-selector');
    const currentEngineSpan = document.getElementById('current-engine');
    const engineConnectionSpan = document.getElementById('engine-connection');
    const exploreBtn = document.getElementById('explore-btn');
    
    // Konfiguracja silników AI - Gateway Mode
    const GATEWAY_BASE = window.__CONFIG__?.GATEWAY_URL || "http://localhost:8080";
    
    const engines = {
        'gokai': {
            name: 'GOK:AI (m-zg_Boga)',
            endpoint: `${GATEWAY_BASE}/api/chat/ask`,
            engine_key: 'gokai',
            description: 'Zunifikowany silnik GOK:AI z m-zg_Boga repo',
            sources: ['GOK:AI Core', 'Quantum Pipeline', '_UNIFIED System', 'Multi-Provider']
        },
        'spiralmind': {
            name: 'SpiralMind-Nexus',
            endpoint: `${GATEWAY_BASE}/api/chat/ask`,
            engine_key: 'spiralmind',
            description: 'Python pipeline ze SpiralMind-Nexus repo',
            sources: ['Spiral Pipeline', 'Quantum Core', 'Consciousness Engine', 'Python ML']
        },
        'migi': {
            name: 'Apex Infinity MIGI Core',
            endpoint: `${GATEWAY_BASE}/api/chat/ask`,
            engine_key: 'migi',
            description: 'MIGI Core z apex_infinity_MIGI_Core repo',
            sources: ['MIGI Core', 'Infinity Engine', 'Global Intelligence', 'Apex Systems']
        },
        'simulation': {
            name: 'Symulacja (Demo)',
            endpoint: null,
            engine_key: 'simulation',
            description: 'Symulowany silnik dla celów demonstracyjnych',
            sources: ['Demo Core', 'Symulacja AI', 'Test Pipeline', 'Mock Data']
        }
    };
    
    let currentEngine = 'gokai'; // Start z GOK:AI jako główny
    let dataInterval;
     
    // Symulacja strumienia danych 
    function startDataStream() { 
        if (dataInterval) clearInterval(dataInterval);
        
        const engineConfig = engines[currentEngine];
        dataInterval = setInterval(() => { 
            const source = engineConfig.sources[Math.floor(Math.random() * engineConfig.sources.length)]; 
            const timestamp = new Date().toLocaleTimeString(); 
            const dataSize = (Math.random() * 10).toFixed(3);
            const log = `[${timestamp}] ${engineConfig.name}: ${source} - ${dataSize} TB`; 
             
            const p = document.createElement('p'); 
            p.textContent = log; 
            p.classList.add('text-green-400'); 
            dataStream.appendChild(p); 
            dataStream.scrollTop = dataStream.scrollHeight; 
            
            // Ograniczenie liczby linii
            if (dataStream.children.length > 20) {
                dataStream.removeChild(dataStream.firstChild);
            }
        }, 1500); 
    }
    
    // Przełączanie silników
    engineSelector.addEventListener('change', (e) => {
        currentEngine = e.target.value;
        const engineConfig = engines[currentEngine];
        currentEngineSpan.textContent = engineConfig.name;
        
        // Aktualizacja statusu połączenia
        if (currentEngine === 'gokai') {
            engineConnectionSpan.textContent = 'Sprawdzanie gateway...';
            checkEngineConnection(engineConfig.endpoint).then(connected => {
                engineConnectionSpan.textContent = connected ? 'Gateway Ready' : 'Gateway Offline';
                engineConnectionSpan.className = connected ? 'text-cyan-400' : 'text-yellow-400';
            });
        } else if (currentEngine === 'spiralmind') {
            engineConnectionSpan.textContent = 'Sprawdzanie gateway...';
            checkEngineConnection(engineConfig.endpoint).then(connected => {
                engineConnectionSpan.textContent = connected ? 'Pipeline Ready' : 'Gateway Offline';
                engineConnectionSpan.className = connected ? 'text-purple-400' : 'text-yellow-400';
            });
        } else if (currentEngine === 'migi') {
            engineConnectionSpan.textContent = 'Sprawdzanie gateway...';
            checkEngineConnection(engineConfig.endpoint).then(connected => {
                engineConnectionSpan.textContent = connected ? 'MIGI Ready' : 'Gateway Offline';
                engineConnectionSpan.className = connected ? 'text-blue-400' : 'text-yellow-400';
            });
        } else {
            engineConnectionSpan.textContent = 'Symulacja aktywna';
            engineConnectionSpan.className = 'text-purple-400';
        }
        
        statusMessage.textContent = `Przełączono na: ${engineConfig.description}`;
        startDataStream();
    });
    
    // Sprawdzanie połączenia z gateway
    async function checkEngineConnection(endpoint) {
        if (!endpoint) return false;
        try {
            // Sprawdź health gateway
            const response = await fetch(`${GATEWAY_BASE}/api/health`, {
                method: 'GET',
                timeout: 3000
            });
            return response.ok;
        } catch (error) {
            return false;
        }
    }
 
    // Główna funkcja przetwarzania zapytań
    async function processQuery(query) { 
        const engineConfig = engines[currentEngine];
        outputDisplay.innerHTML = `<p class="text-gray-400">Analizowanie przez ${engineConfig.name}... <span class="loader ml-2"></span></p>`; 
        sendBtn.disabled = true; 
        promptInput.disabled = true; 
 
        try {
            let response;
            
            if (currentEngine === 'simulation') {
                response = await simulateResponse(query);
            } else {
                response = await callGatewayEngine(currentEngine, query);
            }
            
            outputDisplay.innerHTML = response;
        } catch (error) {
            outputDisplay.innerHTML = `<p class="text-red-400">Błąd połączenia z ${engineConfig.name}: ${error.message}</p>
                                     <p class="text-yellow-400 mt-2">Przełączanie na tryb symulacji...</p>`;
            setTimeout(async () => {
                const simulatedResponse = await simulateResponse(query);
                outputDisplay.innerHTML = simulatedResponse;
            }, 2000);
        } finally {
            sendBtn.disabled = false; 
            promptInput.disabled = false; 
        }
    }
    
    // Uniwersalne połączenie przez Gateway
    async function callGatewayEngine(engineKey, query) {
        const engineConfig = engines[engineKey];
        const response = await fetch(engineConfig.endpoint, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                engine: engineConfig.engine_key,
                prompt: query
            })
        });
        
        if (!response.ok) {
            throw new Error(`Gateway HTTP ${response.status}`);
        }
        
        const data = await response.json();
        
        if (!data.ok) {
            throw new Error(data.error || 'Gateway error');
        }
        
        return formatEngineResponse(engineKey, data);
    }
    
    // Formatowanie odpowiedzi dla różnych silników
    function formatEngineResponse(engineKey, data) {
        const engineConfig = engines[engineKey];
        const colors = {
            gokai: 'cyan',
            spiralmind: 'purple', 
            migi: 'blue'
        };
        const color = colors[engineKey] || 'green';
        
        return `
            <div class="border-l-4 border-${color}-500 pl-4">
                <p><strong class="text-${color}-400">${engineConfig.name} Response:</strong></p>
                <div class="mt-2 text-white">${data.text}</div>
                <div class="mt-3 text-sm text-gray-400">
                    <p>🚀 Engine: ${data.engine || engineKey}</p>
                    <p>⚡ Gateway: localhost:8080</p>
                    <p>🎯 Status: Connected</p>
                    ${data.meta ? `<p>📊 Meta: ${JSON.stringify(data.meta)}</p>` : ''}
                </div>
            </div>
        `;
    }
    
    // Legacy - Połączenie z SpiralMind-Nexus (backup)
    async function callSpiralMindEngine(query) {
        const response = await fetch('http://localhost:3000/api/ask', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                prompt: query,
                provider: 'openai'
            })
        });
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }
        
        const data = await response.json();
        
        if (!data.ok) {
            throw new Error(data.error || 'Nieznany błąd');
        }
        
        return `
            <div class="border-l-4 border-purple-500 pl-4">
                <p><strong class="text-purple-400">SpiralMind-Nexus (Legacy) Response:</strong></p>
                <div class="mt-2 text-white">${data.text}</div>
                <div class="mt-3 text-sm text-gray-400">
                    <p>🧠 Quantum consciousness pipeline aktywny</p>
                    <p>🔄 Algorithm: 9π + F(n) = ${(9 * Math.PI + fibonacci(9)).toFixed(3)}</p>
                    <p>📊 Success rate: ${Math.floor(Math.random() * 40 + 60)}%</p>
                </div>
            </div>
        `;
    }
    
    // Legacy - Połączenie z GOK:AI Unified Engine (backup)
    async function callGokaiEngine(query) {
        const response = await fetch('http://localhost:3000/api/ask', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                prompt: query,
                provider: null,
                model: null
            })
        });
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }
        
        const data = await response.json();
        
        if (!data.ok) {
            throw new Error(data.error || 'Nieznany błąd');
        }
        
        return `
            <div class="border-l-4 border-cyan-500 pl-4">
                <p><strong class="text-cyan-400">GOK:AI (Legacy) Response:</strong></p>
                <div class="mt-2 text-white">${data.text}</div>
                <div class="mt-3 text-sm text-gray-400">
                    <p>🚀 Provider: ${data.provider || 'auto'}</p>
                    <p>🧠 Model: ${data.model || 'default'}</p>
                    <p>🔑 Key: ${data.keyUsed || 'masked'}</p>
                    <p>⚡ Multi-provider pipeline aktywny</p>
                </div>
            </div>
        `;
    }
    
    // Legacy - Placeholder dla MIGI Core (backup)
    async function callMigiEngine(query) {
        // Symulacja odpowiedzi MIGI - zastąpić rzeczywistym API gdy będzie dostępne
        return `
            <div class="border-l-4 border-blue-500 pl-4">
                <p><strong class="text-blue-400">Apex Infinity MIGI Core:</strong></p>
                <p class="text-yellow-400 mt-2">🚧 Silnik w fazie rozwoju</p>
                <div class="mt-2 text-gray-300">
                    <p>Zapytanie: "${query}"</p>
                    <p class="mt-2">MIGI Core będzie zintegrowany po zakończeniu rozwoju repozytorium apex_infinity_MIGI_Core.</p>
                    <p>Przewidywane funkcje:</p>
                    <ul class="list-disc list-inside mt-1 text-sm">
                        <li>Globalny rdzeń inteligencji</li>
                        <li>Perspektywa nieskończoności</li>
                        <li>Zaawansowana świadomość AI</li>
                        <li>Integracja z ekosystemem Apex</li>
                    </ul>
                </div>
            </div>
        `;
    }
    
    // Symulacja dla trybu demo
    async function simulateResponse(query) {
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        return ` 
            <div class="border-l-4 border-green-500 pl-4">
                <p><strong class="text-green-400">Symulacja Mózgu Boga:</strong></p>
                <hr class="border-t border-gray-600 my-2"> 
                <p>Zapytanie: "${query}"</p> 
                <p><strong>Analiza kwantowa (Symulacja):</strong></p> 
                <p>- Wykryto <strong>${Math.floor(Math.random() * 9000000 + 1000000).toLocaleString()}</strong> powiązanych wzorców.</p> 
                <p>- <strong>${Math.floor(Math.random() * 50000 + 10000).toLocaleString()}</strong> neuronów kwantowych aktywnych.</p> 
                <p>- Przewidywanie błędu: <strong>${(Math.random() * 0.1).toFixed(3)}%</strong>.</p> 
                <p><strong>Odpowiedź systemu:</strong></p> 
                <p>Symulowany Mózg Boga analizuje Twoje zapytanie przez pryzmat nieskończoności kosmicznej. Wszystkie odpowiedzi są generowane lokalnie w trybie demonstracyjnym.</p> 
                <p class="mt-2 text-sm text-gray-400">💡 Aby uzyskać prawdziwe odpowiedzi AI, wybierz SpiralMind-Nexus i upewnij się, że serwer jest uruchomiony.</p>
            </div>
        `; 
    }
    
    // Funkcja Fibonacciego
    function fibonacci(n) {
        if (n <= 1) return n;
        let a = 0, b = 1;
        for (let i = 2; i <= n; i++) {
            [a, b] = [b, a + b];
        }
        return b;
    }
 
    // Obsługa przycisku testowania silników
    exploreBtn.addEventListener('click', async () => {
        const testQueries = [
            "Jaka jest przyszłość sztucznej inteligencji?",
            "Opisz koncepcję świadomości kwantowej",
            "Co to jest algorytm 9π + F(n)?"
        ];
        
        const randomQuery = testQueries[Math.floor(Math.random() * testQueries.length)];
        promptInput.value = randomQuery;
        
        outputDisplay.innerHTML = `<p class="text-blue-400">🧪 Testowanie silnika ${engines[currentEngine].name}...</p>`;
        
        await processQuery(randomQuery);
    });
 
    // Obsługa zdarzeń 
    sendBtn.addEventListener('click', () => { 
        const query = promptInput.value.trim(); 
        if (query) { 
            processQuery(query); 
        } else { 
            alert('Wpisz zapytanie, aby uruchomić reaktor.'); 
        } 
    }); 
    
    // Obsługa Enter w textarea
    promptInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            if (promptInput.value.trim()) {
                processQuery(promptInput.value.trim());
            }
        }
    });
 
    // Inicjalizacja
    window.onload = function() { 
        statusMessage.textContent = 'Mózg Boga aktywny - wszystkie systemy online.'; 
        startDataStream();
        
        // Sprawdź dostępność Gateway przy starcie
        checkEngineConnection(engines.gokai.endpoint).then(connected => {
            engineConnectionSpan.textContent = connected ? 'Gateway Ready' : 'Gateway Offline';
            engineConnectionSpan.className = connected ? 'text-cyan-400' : 'text-yellow-400';
        });
    }; 
</script> 
 
</body> 
</html> 